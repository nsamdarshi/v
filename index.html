<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Week Journey üíï</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@1,600&family=Great+Vibes&family=Cormorant+Garamond:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --theme-color: #FF6B9D;
            --theme-light: #FFB6C1;
            --theme-dark: #7A2E35;
            --bg-start: #FFF9FB;
            --bg-mid: #FCE4EC;
            --bg-end: #F8BBD0;
        }

        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--bg-start) 0%, var(--bg-mid) 50%, var(--bg-end) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
            font-family: 'Cormorant Garamond', serif;
            cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 32 32'%3E%3Cpath fill='%23FF6B9D' d='M16 2C8.3 2 2 8.3 2 16s6.3 14 14 14 14-6.3 14-14S23.7 2 16 2zm0 4c2.8 0 5 2.2 5 5s-2.2 5-5 5-5-2.2-5-5 2.2-5 5-5z'/%3E%3C/svg%3E") 16 16, auto;
            transition: background 1s ease;
        }

        /* Background glow */
        .bg-glow {
            position: absolute;
            width: 150vw;
            height: 150vh;
            background: radial-gradient(circle at center, rgba(255, 107, 157, 0.15) 0%, transparent 70%);
            animation: pulse 20s ease-in-out infinite;
            z-index: 0;
        }

        /* Falling Petals */
        .petal {
            position: absolute;
            top: -20px;
            opacity: 0;
            animation: fall 18s linear infinite;
            z-index: 1;
            pointer-events: none;
            transition: transform 0.3s ease;
        }

        .petal:hover {
            transform: scale(1.5) rotate(180deg);
        }

        /* Card Container */
        .card-container {
            animation: float 6s ease-in-out infinite;
            z-index: 10;
            perspective: 1000px;
        }

        .card {
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(15px) saturate(180%);
            border: 1px solid rgba(248, 187, 208, 0.6);
            border-radius: 28px;
            box-shadow:
                0 15px 35px rgba(233, 30, 99, 0.2),
                0 5px 15px rgba(244, 143, 177, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
            text-align: center;
            color: #4A1F24;
            padding: 50px 70px;
            position: relative;
            overflow: hidden;
            max-width: 850px;
            width: 90%;
            transform-style: preserve-3d;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .card:hover {
            transform: translateY(-5px) scale(1.005);
            box-shadow:
                0 20px 40px rgba(233, 30, 99, 0.25),
                0 10px 20px rgba(244, 143, 177, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .card::before {
            content: "";
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg,
                    var(--theme-light),
                    var(--theme-color),
                    #FF9AA2,
                    #FFB7C3,
                    var(--theme-light));
            background-size: 400% 400%;
            z-index: -1;
            border-radius: 30px;
            animation: gradient-border 12s ease infinite;
            filter: blur(2px);
            opacity: 0.8;
        }

        .card::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                radial-gradient(circle at 20% 80%, rgba(255, 182, 193, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 107, 157, 0.1) 0%, transparent 50%);
            opacity: 0.5;
            z-index: -1;
            border-radius: 28px;
        }

        /* Day Indicator */
        .day-indicator {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            gap: 10px;
            z-index: 9999;
        }

        .day-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 107, 157, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .day-dot:hover {
            transform: scale(1.3);
            background: var(--theme-color);
        }

        .day-dot.active {
            background: var(--theme-color);
            transform: scale(1.2);
            box-shadow: 0 0 10px var(--theme-color);
        }

        /* Day Title */
        .day-badge {
            display: inline-block;
            background: linear-gradient(135deg, var(--theme-color), #FF9AA2);
            color: white;
            padding: 8px 25px;
            border-radius: 25px;
            font-size: 0.9rem;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 10px;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.3);
        }

        /* Day Number - Small indicator */
        .day-number {
            font-size: 0.8rem;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: #8B3A62;
            opacity: 0.9;
            margin-bottom: 8px;
            font-weight: 600;
        }

        /* Subtitle - Story Arc */
        .subtitle {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            font-style: italic;
            color: #7A2E45;
            margin-bottom: 25px;
            letter-spacing: 1px;
            opacity: 0;
            animation: fadeIn 1.5s ease 0.5s forwards;
        }

        /* Message - Extra story detail */
        .message {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            color: #5A2035;
            margin-top: 25px;
            padding: 15px 30px;
            background: rgba(233, 30, 99, 0.08);
            border-radius: 15px;
            border-left: 3px solid var(--theme-color);
            text-align: left;
            line-height: 1.6;
            opacity: 0;
            animation: fadeUp 1.5s ease 3.5s forwards;
        }

        /* Icon Display */
        .icon-display {
            display: flex;
            justify-content: center;
            margin: 25px 0 35px;
            gap: 35px;
        }

        .main-icon {
            font-size: 4.5rem;
            opacity: 0;
            animation: roseBloom 2s ease forwards;
            text-shadow:
                0 0 20px rgba(248, 187, 208, 0.8),
                0 0 40px rgba(255, 107, 157, 0.4);
            transform: scale(0.8);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .main-icon:hover {
            transform: scale(1.3) rotate(15deg);
            text-shadow:
                0 0 30px rgba(248, 187, 208, 1),
                0 0 60px rgba(255, 107, 157, 0.6);
        }

        .main-icon.left {
            animation-delay: 0.5s;
        }

        .main-icon.center {
            font-size: 5.5rem;
            animation-delay: 0.7s;
        }

        .main-icon.right {
            animation-delay: 0.9s;
        }

        /* SVG Icons */
        .svg-icon {
            width: 60px;
            height: 60px;
            opacity: 0;
            animation: roseBloom 2s ease forwards;
            filter: drop-shadow(0 0 15px rgba(255, 107, 157, 0.5));
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .svg-icon:hover {
            transform: scale(1.3) rotate(15deg);
            filter: drop-shadow(0 0 25px rgba(255, 107, 157, 0.8));
        }

        .svg-icon.left {
            animation-delay: 0.5s;
        }

        .svg-icon.center {
            width: 80px;
            height: 80px;
            animation-delay: 0.7s;
        }

        .svg-icon.right {
            animation-delay: 0.9s;
        }


        /* Quote */
        .quote {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            font-style: italic;
            letter-spacing: 1px;
            line-height: 1.6;
            opacity: 0;
            color: #2D1018;
            animation: fadeUp 2.5s cubic-bezier(0.19, 1, 0.22, 1) forwards;
            text-shadow: none;
            margin: 0 0 25px;
            position: relative;
            z-index: 2;
            padding: 0 20px;
            font-weight: 500;
        }

        .quote::after {
            content: "";
            display: block;
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, transparent, var(--theme-color) 30%, #FF9AA2 70%, transparent);
            margin: 25px auto 0;
            border-radius: 4px;
            opacity: 0;
            animation: lineGlow 2.5s ease 2.5s forwards;
        }

        /* Name */
        .name {
            margin-top: 15px;
            font-family: 'Great Vibes', cursive;
            font-size: 3.5rem;
            color: #C71585;
            opacity: 0;
            animation: nameGlow 3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            animation-delay: 2.5s;
            text-shadow:
                0 2px 10px rgba(199, 21, 133, 0.3);
            position: relative;
            z-index: 2;
            letter-spacing: 3px;
            transition: all 0.3s ease;
        }

        .name:hover {
            transform: scale(1.05);
            text-shadow:
                0 3px 20px rgba(0, 0, 0, 0.4),
                0 5px 35px rgba(255, 107, 157, 0.5);
        }

        /* Footer */
        .footer {
            margin-top: 35px;
            font-size: 1.2rem;
            color: #7A2E45;
            opacity: 0;
            animation: fadeIn 2s ease 3s forwards;
            font-style: italic;
            letter-spacing: 2px;
            position: relative;
            padding-top: 15px;
        }

        .footer::before {
            content: "üíù";
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.2rem;
            opacity: 0.6;
        }

        /* Navigation Arrows */
        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid var(--theme-color);
            color: var(--theme-color);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(255, 107, 157, 0.2);
        }

        .nav-arrow:hover {
            background: var(--theme-color);
            color: white;
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 107, 157, 0.4);
        }

        .nav-arrow.prev {
            left: 20px;
        }

        .nav-arrow.next {
            right: 20px;
        }

        /* Animations */
        @keyframes fall {
            0% {
                transform: translateY(-20px) rotate(0deg) scale(0.8);
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 0.7;
            }

            100% {
                transform: translateY(120vh) rotate(720deg) scale(1.2);
                opacity: 0;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0) rotate(0.5deg);
            }

            25% {
                transform: translateY(-10px) rotate(-0.5deg);
            }

            75% {
                transform: translateY(-5px) rotate(0.5deg);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 0.7;
            }

            50% {
                transform: scale(1.1);
                opacity: 0.9;
            }
        }

        @keyframes roseBloom {
            0% {
                opacity: 0;
                transform: scale(0.3) rotate(-45deg);
                filter: blur(5px);
            }

            70% {
                transform: scale(1.2) rotate(15deg);
                filter: blur(0);
            }

            100% {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        @keyframes fadeUp {
            0% {
                opacity: 0;
                transform: translateY(30px);
                filter: blur(10px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
                filter: blur(0);
            }
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes nameGlow {
            0% {
                opacity: 0;
                letter-spacing: 15px;
                transform: scale(0.8);
                filter: blur(5px);
            }

            50% {
                transform: scale(1.1);
                filter: blur(0);
            }

            100% {
                opacity: 1;
                letter-spacing: 3px;
                transform: scale(1);
            }
        }

        @keyframes lineGlow {
            0% {
                opacity: 0;
                width: 0;
            }

            100% {
                opacity: 1;
                width: 100px;
                box-shadow: 0 0 15px var(--theme-color);
            }
        }

        @keyframes gradient-border {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        @keyframes slideOut {
            0% {
                opacity: 1;
                transform: translateX(0);
            }

            100% {
                opacity: 0;
                transform: translateX(-50px);
            }
        }

        @keyframes slideIn {
            0% {
                opacity: 0;
                transform: translateX(50px);
            }

            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Music Player */
        .music-player {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.95), rgba(255, 154, 162, 0.95));
            border-radius: 50px;
            width: 180px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.3);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        .music-player:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 35px rgba(255, 107, 157, 0.4);
            width: 200px;
        }

        .music-player.active {
            animation: musicPulse 2s infinite;
        }

        .player-icon {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
        }

        .player-icon i {
            font-size: 24px;
            color: white;
            transition: transform 0.3s ease;
        }

        .music-player:hover .player-icon i {
            transform: scale(1.2);
        }

        .song-info {
            flex: 1;
            padding: 0 15px;
            color: white;
            overflow: hidden;
        }

        .song-title {
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 3px;
            white-space: nowrap;
        }

        .song-artist {
            font-size: 10px;
            opacity: 0.9;
            font-style: italic;
        }

        .progress-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(255, 255, 255, 0.2);
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, white, #FFE4EC);
            transition: width 0.1s linear;
        }

        @keyframes musicPulse {

            0%,
            100% {
                box-shadow: 0 8px 25px rgba(255, 107, 157, 0.3);
            }

            50% {
                box-shadow: 0 8px 35px rgba(255, 107, 157, 0.5), 0 0 20px rgba(255, 107, 157, 0.3);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .card {
                padding: 40px 30px;
                border-radius: 24px;
            }

            .quote {
                font-size: 2rem;
            }

            .name {
                font-size: 3rem;
            }

            .main-icon {
                font-size: 3.5rem;
            }

            .nav-arrow {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .nav-arrow.prev {
                left: 10px;
            }

            .nav-arrow.next {
                right: 10px;
            }

            .music-player {
                bottom: 20px;
                right: 20px;
                width: 160px;
                height: 50px;
            }

            .player-icon {
                width: 50px;
                height: 50px;
            }
        }

        @media (max-width: 480px) {
            .card {
                padding: 30px 20px;
            }

            .quote {
                font-size: 1.6rem;
                line-height: 1.4;
            }

            .name {
                font-size: 2.5rem;
            }

            .main-icon {
                font-size: 2.8rem;
            }

            .day-badge {
                font-size: 0.75rem;
                padding: 6px 18px;
            }

            .footer {
                font-size: 1.1rem;
            }

            .music-player {
                width: 140px;
                height: 45px;
            }
        }

        /* ========== STAGES CONTAINER ========== */
        .stages-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .stage {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            opacity: 0;
            visibility: hidden;
            padding: 20px;
        }

        .stage p,
        .stage h1,
        .stage h2,
        .stage div {
            text-align: center;
        }

        /* Floating Background Animation */
        #background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            overflow: hidden;
        }

        .floating-icon {
            position: absolute;
            opacity: 0.6;
            animation: floatUp 15s linear infinite, sway 6s ease-in-out infinite alternate;
            filter: drop-shadow(0 0 5px rgba(255, 105, 180, 0.3));
            will-change: transform, margin-left;
        }

        @keyframes sway {
            from {
                margin-left: -30px;
            }

            to {
                margin-left: 30px;
            }
        }

        @keyframes floatUp {
            0% {
                transform: translateY(110vh) rotate(0deg) scale(0.8);
                opacity: 0;
            }

            10% {
                opacity: 0.8;
            }

            90% {
                opacity: 0.6;
            }

            100% {
                transform: translateY(-10vh) rotate(360deg) scale(1);
                opacity: 0;
            }
        }

        /* Stage 1: Greeting */
        .greeting-title {
            font-family: 'Great Vibes', cursive;
            font-size: 4.5rem;
            color: #2D1018;
            text-shadow: 0 2px 10px rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
        }

        .highlight-name {
            color: #C71585;
            text-shadow: 0 2px 15px rgba(199, 21, 133, 0.4);
        }

        .greeting-sub {
            font-size: 1.8rem;
            color: #4A1F24;
            font-style: italic;
        }

        /* Stage 2: Day Announcement */
        .day-announce {
            text-align: center;
        }

        .day-icon {
            font-size: 8rem;
            display: block;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 30px rgba(255, 107, 157, 0.6));
        }

        .day-announce h2 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            color: #2D1018;
            font-style: italic;
            text-shadow: 0 2px 10px rgba(255, 255, 255, 0.5);
        }

        /* Stage 3: Text Box */
        .text-box-container {
            perspective: 1000px;
        }

        /* WhatsApp Chat Container */
        .text-box {
            background: #ECE5DD;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.15);
            position: relative;
            max-width: 400px;
            min-width: 280px;
        }

        /* WhatsApp Green Message Bubble */
        .typing-text {
            background: #DCF8C6;
            padding: 10px 12px 22px 12px;
            border-radius: 8px;
            border-top-right-radius: 0;
            font-size: 1rem;
            color: #303030;
            text-align: left;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            position: relative;
            margin-bottom: 12px;
            box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        /* Message tail */
        .typing-text::before {
            content: '';
            position: absolute;
            top: 0;
            right: -8px;
            width: 0;
            height: 0;
            border-left: 8px solid #DCF8C6;
            border-top: 8px solid transparent;
        }

        /* Timestamp and ticks - Hidden initially */
        .typing-text::after {
            content: '11:42 AM';
            position: absolute;
            bottom: 4px;
            right: 8px;
            font-size: 0.65rem;
            color: #667781;
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .typing-text.sent::after {
            content: '11:42 AM ‚úì‚úì';
            color: #53bdeb;
            /* Blue ticks */
        }

        .typing-text span {
            opacity: 0;
        }

        /* WhatsApp Input Bar */
        .wa-input-bar {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #F0F0F0;
            border-radius: 25px;
            padding: 6px 6px 6px 16px;
        }

        .wa-input-text {
            flex: 1;
            color: #303030;
            font-size: 0.95rem;
            font-family: 'Segoe UI', Roboto, sans-serif;
            min-height: 24px;
            display: flex;
            align-items: center;
        }

        .wa-input-text.placeholder {
            color: #667781;
        }

        .wa-input-text span {
            opacity: 0;
        }

        /* WhatsApp Green Send Button */
        .fake-send-btn {
            width: 40px;
            height: 40px;
            min-width: 40px;
            border-radius: 50%;
            background: #25D366;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(37, 211, 102, 0.4);
            position: relative;
        }

        /* SVG Paper Plane Icon */
        .fake-send-btn svg {
            width: 18px;
            height: 18px;
            fill: white;
            margin-left: 2px;
            transform: translateX(-1px);
        }

        .fake-send-btn:hover {
            transform: scale(1.1);
        }

        .fake-send-btn:active {
            transform: scale(0.95);
        }

        @keyframes sendPulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.2);
            }
        }

        /* Stage 4: Ideas */
        .stage-4 {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .idea {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 40px;
            box-sizing: border-box;

            font-size: 2.5rem;
            /* Larger text */
            color: #2D1018;
            opacity: 0;
            text-shadow: 0 1px 5px rgba(255, 255, 255, 0.5);
            line-height: 1.4;
            pointer-events: none;
        }

        .idea strong {
            color: #C71585;
        }

        .emphasis {
            font-size: 3.2rem;
            color: #C71585;
            font-weight: bold;
            display: inline-block;
        }

        /* Stage 5: Reveal Card */
        .reveal-card {
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(15px) saturate(180%);
            border: 1px solid rgba(248, 187, 208, 0.6);
            border-radius: 28px;
            box-shadow:
                0 15px 35px rgba(233, 30, 99, 0.2),
                0 5px 15px rgba(244, 143, 177, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
            text-align: center;
            color: #4A1F24;
            padding: 50px 70px;
            max-width: 850px;
            width: 90%;
        }

        /* Stage 6: Celebration */
        .celebration-container {
            position: absolute;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            overflow: hidden;
        }

        .balloon {
            position: absolute;
            font-size: 4rem;
            animation: floatUp 4s ease-out forwards;
        }

        @keyframes floatUp {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(-20vh) rotate(360deg);
                opacity: 0.8;
            }
        }

        /* Replay Section */
        .replay-section {
            text-align: center;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .replay-section p {
            font-size: 1.2rem;
            color: white;
            margin-bottom: 15px;
            opacity: 0.8;
        }

        .replay-btn {
            background: linear-gradient(135deg, var(--theme-color), #FF9AA2);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 30px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.4);
        }

        .replay-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.5);
        }

        /* Proposal Stage Styles */
        .proposal-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 50px 60px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(233, 30, 99, 0.3);
            max-width: 500px;
            width: 90%;
        }

        .proposal-question {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            color: #2D1018;
            margin-bottom: 15px;
            font-style: italic;
        }

        .proposal-sub {
            font-size: 1.3rem;
            color: #7A2E45;
            margin-bottom: 40px;
        }

        .proposal-icon {
            font-size: 5rem;
            margin-bottom: 30px;
            display: block;
            animation: heartBeat 1.5s infinite;
        }

        @keyframes heartBeat {

            0%,
            100% {
                transform: scale(1);
            }

            25% {
                transform: scale(1.1);
            }

            50% {
                transform: scale(1);
            }

            75% {
                transform: scale(1.15);
            }
        }

        .proposal-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .proposal-btn {
            padding: 18px 50px;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: 'Cormorant Garamond', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }

        .proposal-btn.yes {
            background: linear-gradient(135deg, #ff4d6d, #ff758f);
            color: white;
            box-shadow: 0 8px 25px rgba(255, 77, 109, 0.4);
        }

        .proposal-btn.yes:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 35px rgba(255, 77, 109, 0.5);
        }

        .proposal-btn.no {
            background: #f0f0f0;
            color: #666;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.1s ease;
        }

        .proposal-response {
            text-align: center;
            opacity: 0;
            visibility: hidden;
        }

        .response-icon {
            font-size: 6rem;
            margin-bottom: 20px;
            display: block;
        }

        .response-text {
            font-family: 'Great Vibes', cursive;
            font-size: 3rem;
            color: #C71585;
            margin-bottom: 20px;
        }

        .response-sub {
            font-size: 1.3rem;
            color: #7A2E45;
        }

        /* Teddy Gift Stage Styles */
        .teddy-gift-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 50px 60px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(224, 172, 105, 0.3);
            max-width: 500px;
            width: 90%;
        }

        .gift-box {
            font-size: 8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-block;
            animation: giftShake 0.5s ease-in-out infinite;
        }

        .gift-box:hover {
            transform: scale(1.1);
        }

        @keyframes giftShake {

            0%,
            100% {
                transform: rotate(-3deg);
            }

            50% {
                transform: rotate(3deg);
            }
        }

        .gift-box.opened {
            animation: none;
        }

        .teddy-reveal {
            opacity: 0;
            transform: scale(0);
            transition: all 0.5s ease;
        }

        .teddy-reveal.show {
            opacity: 1;
            transform: scale(1);
        }

        .teddy-reveal .teddy-icon {
            font-size: 10rem;
            display: block;
            margin-bottom: 20px;
            animation: teddyBounce 1s ease-in-out infinite;
        }

        @keyframes teddyBounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-15px);
            }
        }

        .teddy-message {
            font-family: 'Great Vibes', cursive;
            font-size: 2.5rem;
            color: #C71585;
            margin-bottom: 15px;
        }

        .teddy-sub {
            font-size: 1.2rem;
            color: #7A2E45;
        }

        .tap-hint {
            font-size: 1rem;
            color: #888;
            margin-top: 20px;
            animation: pulse 2s infinite;
        }

        /* Responsive for stages */
        @media (max-width: 768px) {
            .greeting-title {
                font-size: 3rem;
            }

            .day-icon {
                font-size: 5rem;
            }

            .day-announce h2 {
                font-size: 2.5rem;
            }

            .idea {
                font-size: 1.5rem;
            }

            .reveal-card {
                padding: 30px 25px;
            }
        }

        @media (max-width: 480px) {
            .greeting-title {
                font-size: 2.5rem;
            }

            .greeting-sub {
                font-size: 1.3rem;
            }

            .day-icon {
                font-size: 4rem;
            }

            .day-announce h2 {
                font-size: 2rem;
            }

            .text-box {
                padding: 20px 30px;
            }

            .typing-text {
                font-size: 1.3rem;
            }

            .idea {
                font-size: 1.2rem;
            }
        }

        /* Music Consent Modal */
        .music-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s;
        }

        /* Coming Soon Overlay */
        #comingSoonOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            z-index: 5000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s;
        }

        #comingSoonOverlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .music-modal.visible {
            opacity: 1;
            visibility: visible;
        }

        .music-modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 300px;
            font-family: 'Cormorant Garamond', serif;
        }

        .music-btn {
            background: var(--theme-color);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-size: 1.1rem;
            margin-top: 15px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .music-btn:hover {
            transform: scale(1.05);
        }

        /* Valentine Stage Special */
        .valentine-btn {
            padding: 15px 40px;
            font-size: 1.5rem;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            font-weight: bold;
        }

        .v-yes {
            background: #ff0040;
            /* Red */
            color: white;
            box-shadow: 0 4px 15px rgba(255, 0, 64, 0.4);
            animation: beat 0.8s infinite alternate;
        }

        .v-no {
            background: #f0f0f0;
            color: #333;
        }

        @keyframes beat {
            to {
                transform: scale(1.1);
                box-shadow: 0 4px 25px rgba(255, 0, 64, 0.6);
            }
        }
    </style>
</head>


<body>
    <!-- Music Consent Modal -->
    <div id="musicConsentModal" class="music-modal">
        <div class="music-modal-content">
            <h2 style="color: #2D1018; margin-bottom: 15px;">üéµ Enable Music?</h2>
            <p style="color: #4A1F24;">This experience is best enjoyed with sound.</p>
            <button class="music-btn" id="musicConsentBtn">Start Experience üíï</button>
        </div>
    </div>

    <!-- Background Animation (Floating SVGs) -->
    <div id="background-animation"></div>

    <!-- Navigation Arrows -->
    <button class="nav-arrow prev" id="prevBtn"><i class="fas fa-chevron-left"></i></button>
    <button class="nav-arrow next" id="nextBtn"><i class="fas fa-chevron-right"></i></button>

    <!-- Main Container with Stages -->
    <div class="stages-container" id="stagesContainer">

        <!-- Stage 1: Greeting -->
        <div class="stage stage-1" id="stage1">
            <h1 class="greeting-title">Hey <span class="highlight-name">Anuüå∏</span></h1>
            <p class="greeting-sub">I have something special for you...</p>
        </div>

        <!-- Stage 2: Day Announcement -->
        <div class="stage stage-2" id="stage2">
            <div class="day-announce" id="dayAnnounce">
                <span class="day-icon" id="stageIcon">üåπ</span>
                <h2 id="stageDayTitle">It's Rose Day!</h2>
            </div>
        </div>

        <!-- Stage 3: Typing Effect / Text Box -->
        <div class="stage stage-3" id="stage3">
            <div class="text-box-container">
                <div class="text-box">
                    <!-- WhatsApp Message Bubble (starts hidden) -->
                    <p class="typing-text" id="typingText" style="display: none;"></p>
                    <!-- WhatsApp Input Bar -->
                    <div class="wa-input-bar">
                        <div class="wa-input-text placeholder" id="waInputText">Type a message</div>
                        <div class="fake-send-btn" aria-label="Send">
                            <svg viewBox="0 0 24 24" width="24" height="24" class="">
                                <path fill="currentColor"
                                    d="M1.101 21.757 23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z">
                                </path>
                            </svg>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stage 4: Buildup Ideas with Personal Memories -->
        <div class="stage stage-4" id="stage4">
            <p class="idea idea-1">That's what I was going to send...</p>
            <p class="idea idea-2">But then I stopped.</p>
            <p class="idea idea-3">I remembered something <strong>special</strong>.</p>
            <p class="idea idea-4">Remember the <strong>Kash flower</strong> I gifted you? üå∏</p>
            <p class="idea idea-5">And that <strong>yellow flower</strong> I put on your ears... üåº</p>
            <p class="idea idea-6">...when you were feeling sad?</p>
            <p class="idea idea-7">I'm so sorry that I'm not with you right now... ü•∫</p>
            <p class="idea idea-8">But my heart is always right there beside you.</p>
            <p class="idea idea-9">Those little moments mean <span class="emphasis">everything</span> to me ‚ú®</p>
            <p class="idea idea-10">Because you deserve the <span class="emphasis">world</span> üíï</p>
        </div>

        <!-- Stage 5: Main Reveal (Card) -->
        <div class="stage stage-5" id="stage5">
            <div class="reveal-card" id="revealCard">
                <div class="day-number" id="dayNumber">Day 1</div>
                <div class="day-badge" id="dayBadge">Feb 7 ‚Ä¢ Rose Day</div>
                <div class="subtitle" id="daySubtitle">Where Our Journey Begins...</div>

                <div class="icon-display" id="iconDisplay">
                    <img src="assets/heart.svg" class="svg-icon left" alt="heart">
                    <img src="assets/heart.svg" class="svg-icon center" alt="heart">
                    <img src="assets/heart.svg" class="svg-icon right" alt="heart">
                </div>

                <div class="quote" id="quoteText">
                    In a garden of billions,<br>
                    my heart chose you ‚Äî<br>
                    the rarest rose that ever bloomed.
                </div>

                <div class="name" id="recipientName">‚Äî Anuüå∏</div>

                <div class="message" id="dayMessage">
                    Every love story has a beginning. This rose marks the first chapter of our week together.
                </div>

                <div class="footer" id="footerText">Happy Rose Day ‚Ä¢ February 7, 2026</div>
            </div>
        </div>

        <!-- Stage 5.5: Proposal Question (Only for Propose Day) -->
        <div class="stage stage-proposal" id="stageProposal" style="display: none;">
            <div class="proposal-container">
                <span class="proposal-icon">üíç</span>
                <h2 class="proposal-question">Do you love me?</h2>
                <p class="proposal-sub">Be honest... üíï</p>
                <div class="proposal-buttons">
                    <button class="proposal-btn yes" id="proposalYes">Yes! üíñ</button>
                    <button class="proposal-btn no" id="proposalNo">No üò¢</button>
                </div>
            </div>
        </div>

        <!-- Proposal Response -->
        <div class="stage proposal-response" id="proposalResponse">
            <span class="response-icon">üéâüíñüéâ</span>
            <h2 class="response-text">I knew it!</h2>
            <p class="response-sub">You just made me the happiest person alive! üíï</p>
        </div>

        <!-- Stage 5.6: Teddy Gift (Only for Teddy Day) -->
        <div class="stage stage-teddy" id="stageTeddy" style="display: none;">
            <div class="teddy-gift-container">
                <div id="giftWrapper">
                    <span class="gift-box" id="giftBox">üéÅ</span>
                    <p class="tap-hint">Tap the gift to open! üéÄ</p>
                </div>
                <div class="teddy-reveal" id="teddyReveal">
                    <span class="teddy-icon">üß∏</span>
                    <h2 class="teddy-message">A Teddy for You!</h2>
                    <p class="teddy-sub">Hold it tight whenever you miss me üíï</p>
                </div>
            </div>
        </div>

    </div>
    </div>

    <!-- Stage 5.7: Valentine's Proposal (ONLY Feb 14) -->
    <div class="stage stage-valentine" id="stageValentine"
        style="display: none; flex-direction: column; align-items: center; justify-content: center; height: 100%;">
        <div class="valentine-container" style="text-align: center;">
            <div style="font-size: 5rem; margin-bottom: 20px;">üåπüíù</div>
            <h1 style="color: #d32f2f; font-family: 'Great Vibes', cursive; font-size: 4rem; margin-bottom: 20px;">
                Will you be my...
            </h1>
            <h2 style="font-size: 2.5rem; color: #ff0040; margin-bottom: 40px; font-weight: bold;">
                Valentine?
            </h2>
            <div class="valentine-buttons">
                <button class="valentine-btn v-yes" id="valentineYes">YES! ‚ù§Ô∏è</button>
                <button class="valentine-btn v-no" id="valentineNo">No üíî</button>
            </div>
        </div>
    </div>

    <!-- Stage 6: Celebration (Balloons/Fireworks) -->
    <div class="stage stage-6" id="stage6">
        <div class="celebration-container" id="celebrationContainer"></div>
    </div>

    <!-- Stage 7: End Screen / Replay -->
    <div class="stage stage-7" id="stage7"
        style="display: none; align-items: center; justify-content: center; flex-direction: column;">
        <div class="replay-section" id="replaySection">
            <p>Hope you loved this! üíï</p>
            <button class="replay-btn" id="replayBtn">Watch Again ‚Ü∫</button>
        </div>
    </div>
    </div>

    <!-- Coming Soon Overlay (Added separately to preserve DOM) -->
    <div id="comingSoonOverlay">
        <div style="font-size: 5rem; margin-bottom: 30px;">üíù</div>
        <h1 style="font-family: 'Great Vibes', cursive; font-size: 3.5rem; margin-bottom: 20px;">
            Something Special is Coming...
        </h1>
        <p style="font-size: 1.5rem; opacity: 0.9; font-style: italic;">
            For <span id="csName">Anuüå∏</span>
        </p>
        <p style="font-size: 1.2rem; margin-top: 30px; opacity: 0.7;">
            Valentine's Week begins on February 7th üíï
        </p>
    </div>

    <!-- Day Indicator (Dots) -->
    <div class="day-indicator" id="dayIndicator"></div>


    <!-- Music Player -->
    <div class="music-player" id="musicPlayer">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="player-icon" id="playPauseBtn">
            <i class="fas fa-play"></i>
        </div>
        <div class="song-info">
            <div class="song-title">Valentine Vibes üíï</div>
            <div class="song-artist">Your Love Song</div>
        </div>
        <audio id="bgMusic" loop preload="auto">
            <source src="assets/music.mp3" type="audio/mpeg">
            <source src="https://cdn.pixabay.com/audio/2024/02/14/audio_9770949632.mp3" type="audio/mpeg">
            <source src="https://cdn.pixabay.com/audio/2022/10/12/audio_be9c28e1db.mp3" type="audio/mpeg">
        </audio>
    </div>

    <script src="config.js"></script>
    <script>
        // ============ STATE ============
        let currentDayIndex = 0;
        let isPlaying = false;
        let petals = [];
        let isDateLocked = true; // Set to true for production (date-based), false for testing
        let debugDate = null; // For debugging: set to test specific dates like '2-7'
        let showDebugPanel = true; // Set to true to show the wrench icon, false to hide it

        // ============ DATE MAPPING ============
        const dateToDay = {
            '2-7': 0,   // Feb 7 - Rose Day
            '2-8': 1,   // Feb 8 - Propose Day
            '2-9': 2,   // Feb 9 - Chocolate Day
            '2-10': 3,  // Feb 10 - Teddy Day
            '2-11': 4,  // Feb 11 - Promise Day
            '2-12': 5,  // Feb 12 - Hug Day
            '2-13': 6,  // Feb 13 - Kiss Day
            '2-14': 7   // Feb 14 - Valentine's Day
        };

        const dayNames = {
            0: 'Rose Day',
            1: 'Propose Day',
            2: 'Chocolate Day',
            3: 'Teddy Day',
            4: 'Promise Day',
            5: 'Hug Day',
            6: 'Kiss Day',
            7: "Valentine's Day"
        };

        function getTodaysDayIndex() {
            // Use debug date if set
            if (debugDate) {
                if (dateToDay.hasOwnProperty(debugDate)) {
                    return dateToDay[debugDate];
                }
                return -1;
            }

            // Get current date in user's timezone (international)
            const now = new Date();
            const month = now.getMonth() + 1; // 0-indexed
            const day = now.getDate();
            const key = `${month}-${day}`;

            console.log(`üìÖ Current date: ${now.toLocaleDateString()} (${key})`);

            if (dateToDay.hasOwnProperty(key)) {
                console.log(`‚úÖ Today is ${dayNames[dateToDay[key]]}!`);
                return dateToDay[key];
            }

            // Before Feb 7 - show "Coming Soon" (return -1)
            if (month < 2 || (month === 2 && day < 7)) {
                console.log('‚è≥ Valentine\'s Week hasn\'t started yet!');
                return -1;
            }

            // After Feb 14 - show final day as memento
            if (month > 2 || (month === 2 && day > 14)) {
                console.log('üíï Valentine\'s Week has ended, showing final day');
                return 7;
            }

            return 0; // Default to first day
        }

        // ============ DEBUG PANEL ============
        function createDebugPanel() {
            const debugPanel = document.createElement('div');
            debugPanel.id = 'debugPanel';
            debugPanel.className = 'collapsed'; // Start collapsed by default
            debugPanel.innerHTML = `
                <style>
                    #debugPanel {
                        position: fixed;
                        top: 10px;
                        left: 10px;
                        background: rgba(0,0,0,0.85);
                        color: white;
                        padding: 15px;
                        border-radius: 10px;
                        z-index: 99999;
                        font-family: monospace;
                        font-size: 12px;
                        max-width: 200px;
                    }
                    #debugPanel.collapsed {
                        max-width: 40px;
                        padding: 10px;
                        cursor: pointer;
                    }
                    #debugPanel.collapsed .debug-content { display: none; }
                    #debugPanel select, #debugPanel button {
                        width: 100%;
                        margin: 5px 0;
                        padding: 5px;
                        border-radius: 5px;
                        border: none;
                    }
                    #debugPanel button {
                        background: #25D366;
                        color: white;
                        cursor: pointer;
                    }
                    #debugPanel button:hover { opacity: 0.9; }
                    .debug-toggle { cursor: pointer; }
                </style>
                <div class="debug-toggle" onclick="this.parentElement.classList.toggle('collapsed')">üîß</div>
                <div class="debug-content">
                    <div style="margin-bottom: 10px; font-weight: bold;">üìÖ Date Debug</div>
                    <select id="debugDateSelect">
                        <option value="">Use Real Date</option>
                        <option value="2-6">Feb 6 (Before Week)</option>
                        <option value="2-7">Feb 7 - Rose Day</option>
                        <option value="2-8">Feb 8 - Propose Day</option>
                        <option value="2-9">Feb 9 - Chocolate Day</option>
                        <option value="2-10">Feb 10 - Teddy Day</option>
                        <option value="2-11">Feb 11 - Promise Day</option>
                        <option value="2-12">Feb 12 - Hug Day</option>
                        <option value="2-13">Feb 13 - Kiss Day</option>
                        <option value="2-14">Feb 14 - Valentine's</option>
                        <option value="2-15">Feb 15 (After Week)</option>
                    </select>
                    <button onclick="applyDebugDate()">Apply Date</button>
                    <div id="debugInfo" style="margin-top: 10px; font-size: 10px; opacity: 0.8;"></div>
                </div>
            `;
            document.body.appendChild(debugPanel);
            updateDebugInfo();
        }

        function applyDebugDate() {
            const select = document.getElementById('debugDateSelect');
            debugDate = select.value || null;
            isDateLocked = true;

            // Reload the experience
            gsap.globalTimeline.clear();
            const todayIndex = getTodaysDayIndex();

            if (todayIndex === -1) {
                showComingSoon();
            } else {
                hideComingSoon();
                currentDayIndex = todayIndex;
                populateDayContent(config.days[currentDayIndex]);
                setupMusicForDay();
                playTimeline();
            }
            updateDebugInfo();
        }

        function updateDebugInfo() {
            const infoEl = document.getElementById('debugInfo');
            if (infoEl) {
                const now = new Date();
                infoEl.innerHTML = `
                    Real: ${now.toLocaleDateString()}<br>
                    Debug: ${debugDate || 'OFF'}<br>
                    Day: ${currentDayIndex >= 0 ? dayNames[currentDayIndex] : 'Coming Soon'}
                `;
            }
        }

        // ============ DOM ELEMENTS ============
        const dayIndicator = document.getElementById('dayIndicator');
        const dayBadge = document.getElementById('dayBadge');
        const iconDisplay = document.getElementById('iconDisplay');
        const quoteText = document.getElementById('quoteText');
        const recipientName = document.getElementById('recipientName');
        const footerText = document.getElementById('footerText');
        const mainCard = document.getElementById('mainCard');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const musicPlayer = document.getElementById('musicPlayer');
        const bgMusic = document.getElementById('bgMusic');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const progressBar = document.getElementById('progressBar');
        const petalsContainer = document.getElementById('petalsContainer');

        // ============ INITIALIZATION ============
        function init() {
            // Initialize global features first so they work even in "Coming Soon" mode
            createFloatingBackground();
            if (showDebugPanel) {
                createDebugPanel(); // Add debug panel only if enabled
            }
            setupMusicForDay();

            // Replay button
            document.getElementById('replayBtn').addEventListener('click', () => {
                gsap.to('#stage7', {
                    opacity: 0, visibility: 'hidden', duration: 0.5, onComplete: () => {
                        document.getElementById('stage7').style.display = 'none';
                        playTimeline();
                    }
                });
            });

            // Music control
            playPauseBtn.addEventListener('click', (e) => { e.stopPropagation(); toggleMusic(); });
            bgMusic.addEventListener('timeupdate', updateProgress);

            const todayIndex = getTodaysDayIndex();

            if (isDateLocked) {
                // Hide navigation in production - users can only see today's content
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'none';
                dayIndicator.style.display = 'none';

                if (todayIndex === -1) {
                    showComingSoon();
                    // Even if coming soon, we try to play music if configured (or just bg music)
                    tryAutoPlayMusic();
                    return;
                }
                currentDayIndex = todayIndex;
            } else {
                // Show navigation in debug/testing mode
                prevBtn.style.display = 'block';
                nextBtn.style.display = 'block';
                dayIndicator.style.display = 'flex';
                currentDayIndex = 0; // Start at first day for testing
            }

            // Set up day content then play timeline
            populateDayContent(config.days[currentDayIndex]);
            createDayDots();

            // Music setup is already called above, but we might need to update source if day changed
            setupMusicForDay();
            tryAutoPlayMusic();
            playTimeline();
        }

        function populateDayContent(day) {
            // Update CSS theme
            document.documentElement.style.setProperty('--theme-color', day.themeColor);
            document.body.style.background = `linear-gradient(135deg, ${day.bgStart} 0%, ${day.bgMid} 50%, ${day.bgEnd} 100%)`;

            // Stage 2: Day announcement
            document.getElementById('stageIcon').textContent = day.icon;
            document.getElementById('stageDayTitle').textContent = `It's ${day.title}!`;

            // Stage 3: Typing text - now types in input bar first
            const waInputText = document.getElementById('waInputText');
            const typingText = document.getElementById('typingText');
            const typingMessage = `Happy ${day.title}! ${day.icon}`;

            // Set up input text for typing animation
            waInputText.innerHTML = typingMessage.split('').map(c => `<span>${c}</span>`).join('');
            waInputText.classList.remove('placeholder');

            // Prepare bubble for later
            typingText.innerHTML = typingMessage;
            typingText.style.display = 'none';

            // Stage 5: Reveal card
            document.getElementById('dayNumber').textContent = day.dayNumber;
            document.getElementById('dayBadge').textContent = `${day.date} ‚Ä¢ ${day.title}`;
            document.getElementById('daySubtitle').textContent = day.subtitle;

            const icons = day.icons || [day.icon, day.icon, day.icon];
            document.getElementById('iconDisplay').innerHTML = `
        <div class="main-icon left">${icons[0]}</div>
        <div class="main-icon center">${icons[1]}</div>
        <div class="main-icon right">${icons[2]}</div>
        `;

            document.getElementById('quoteText').innerHTML = day.quote;
            document.getElementById('recipientName').textContent = `‚Äî ${config.recipientName}`;
            document.getElementById('dayMessage').textContent = day.message;
            document.getElementById('footerText').textContent = `Happy ${day.title} ‚Ä¢ ${day.date}, ${config.year || 2026}`;

            // Stage 4: Memories - Dynamic Injection
            const stage4 = document.getElementById('stage4');
            if (stage4 && day.memories) {
                stage4.innerHTML = day.memories.map((text, index) =>
                    `<p class="idea idea-${index + 1}">${text}</p>`
                ).join('');
            }
        }

        function playTimeline() {
            const tl = gsap.timeline();

            // Try to play music when animation starts
            bgMusic.play().catch(() => {
                console.log('Click the music player to start audio');
            });

            // Reset all stages
            gsap.set('.stage', { opacity: 0, visibility: 'hidden' });
            gsap.set('#stage7', { display: 'none' }); // Hide end screen explicitly
            gsap.set('.idea', { opacity: 0, y: 20 });
            gsap.set('.typing-text span', { opacity: 0 });
            gsap.set('.typing-text span', { opacity: 0 });
            gsap.set('.typing-text', { y: 0, opacity: 1, scale: 1 });
            // Replay reset moved to generic stage reset above


            // Reset send button and message bubble for replay
            const sendBtn = document.querySelector('.fake-send-btn');
            const typingText = document.querySelector('.typing-text');
            if (sendBtn) {
                gsap.set(sendBtn, { scale: 1, opacity: 1 });
            }
            if (typingText) {
                typingText.classList.remove('sent');
            }


            // Stage 1: Greeting
            tl.to('#stage1', { opacity: 1, visibility: 'visible', duration: 1 })
                .from('.greeting-title', { y: 30, opacity: 0, duration: 0.8, ease: 'back.out(1.7)' })
                .from('.greeting-sub', { y: 20, opacity: 0, duration: 0.6 }, '-=0.4')
                .to('#stage1', { opacity: 0, visibility: 'hidden', duration: 0.5 }, '+=1.5')

                // Stage 2: Day Announcement
                .to('#stage2', { opacity: 1, visibility: 'visible', duration: 0.5 })
                .from('#stageIcon', { scale: 0, rotation: -180, duration: 0.6, ease: 'back.out(1.5)' })
                .from('#stageDayTitle', { opacity: 0, scale: 0.8, duration: 0.5 }, '-=0.3')
                .to('#stage2', { opacity: 0, visibility: 'hidden', duration: 0.5 }, '+=2')

                // Stage 3: Typing in input bar, then sending to bubble
                .to('#stage3', { opacity: 1, visibility: 'visible', duration: 0.3 })
                .from('.text-box', { scale: 0.8, opacity: 0, y: 30, duration: 0.6, ease: 'back.out(1.4)' })
                // Type in the input bar
                .to('.wa-input-text span', { opacity: 1, duration: 0.04, stagger: 0.06 })
                .to({}, { duration: 0.5 }) // Pause after typing
                // Press send button
                .to('.fake-send-btn', { scale: 0.9, duration: 0.1 })
                .to('.fake-send-btn', { scale: 1.05, duration: 0.15 })
                // Clear input and show message bubble
                .add(() => {
                    const waInput = document.getElementById('waInputText');
                    const typingText = document.getElementById('typingText');
                    waInput.innerHTML = 'Type a message';
                    waInput.classList.add('placeholder');
                    typingText.style.display = 'block';
                    typingText.classList.add('sent');
                })
                .from('#typingText', { scale: 0.8, opacity: 0, y: 20, duration: 0.3, ease: 'back.out(1.2)' })
                .to({}, { duration: 1 }) // Show the sent message
                .to('#stage3', { opacity: 0, visibility: 'hidden', duration: 0.4 })

                // Stage 4: Dynamic Memories
                .to('#stage4', { opacity: 1, visibility: 'visible', duration: 1 });

            // Animate all visible .idea elements dynamically
            const ideas = document.querySelectorAll('#stage4 .idea');
            if (ideas.length > 0) {
                ideas.forEach((idea, index) => {
                    // Animate In
                    tl.to(idea, { opacity: 1, y: 0, duration: 1 });

                    // Hold Logic
                    let holdTime = 3;
                    if (idea.textContent.length > 40) holdTime = 4; // Longer text = longer read

                    // Animate Out
                    tl.to(idea, { opacity: 0, duration: 0.5 }, `+=${holdTime}`);
                });
            } else {
                tl.to({}, { duration: 1 }); // Fallback if no ideas
            }

            tl.to('#stage4', { opacity: 0, visibility: 'hidden', duration: 1 });

            // Check for special interactive days
            const isProposeDayActive = currentDayIndex === 1; // Feb 8 - Propose Day
            const isTeddyDayActive = currentDayIndex === 3;   // Feb 10 - Teddy Day
            const isValentineDayActive = currentDayIndex === 7; // Feb 14 - Valentine's Day

            if (isProposeDayActive) {
                // Show proposal stage and wait for user interaction
                tl.add(() => showProposalStage());
            } else if (isTeddyDayActive) {
                // Show teddy gift stage and wait for user interaction
                tl.add(() => showTeddyStage());
            } else if (isValentineDayActive) {
                // Show special Valentine question
                tl.add(() => showValentineStage());
            } else {
                // Normal flow - go straight to reveal card
                addRevealCardAnimation(tl);
            }
        }

        // ============ VALENTINE INTERACTION (Feb 14) ============
        function showValentineStage() {
            const stageValentine = document.getElementById('stageValentine');
            stageValentine.style.display = 'flex';

            gsap.to('#stageValentine', { opacity: 1, visibility: 'visible', duration: 0.5 });
            gsap.from('.valentine-container', { scale: 0.8, opacity: 0, y: 30, duration: 0.8, ease: 'back.out(1.4)' });

            const vYes = document.getElementById('valentineYes');
            const vNo = document.getElementById('valentineNo');

            // YES Button -> Massive Celebration
            vYes.onclick = () => {
                // Massive Confetti
                for (let i = 0; i < 30; i++) {
                    setTimeout(() => createConfetti(window.innerWidth / 2, window.innerHeight / 2), i * 100);
                    setTimeout(() => createCelebration(), i * 200);
                }

                // Transition to Final Card
                gsap.to('#stageValentine', {
                    opacity: 0, visibility: 'hidden', duration: 0.5, delay: 1, onComplete: () => {
                        const tl = gsap.timeline();
                        addRevealCardAnimation(tl);
                    }
                });
            };

            // NO Button -> Runaway (Harder to catch)
            vNo.onmouseover = vNo.ontouchstart = () => {
                const container = stageValentine.querySelector('.valentine-container');
                const maxX = window.innerWidth / 2 - vNo.offsetWidth;
                const maxY = window.innerHeight / 2 - vNo.offsetHeight;

                const newX = (Math.random() - 0.5) * maxX * 1.5;
                const newY = (Math.random() - 0.5) * maxY * 1.5;

                gsap.to(vNo, { x: newX, y: newY, duration: 0.2, ease: 'power2.out' });
            };
        }

        // ============ PROPOSAL INTERACTION ============
        function showProposalStage() {
            const stageProposal = document.getElementById('stageProposal');
            stageProposal.style.display = 'flex';

            gsap.to('#stageProposal', { opacity: 1, visibility: 'visible', duration: 0.5 });
            gsap.from('.proposal-container', { scale: 0.8, opacity: 0, y: 30, duration: 0.6, ease: 'back.out(1.4)' });

            // Setup button handlers
            const yesBtn = document.getElementById('proposalYes');
            const noBtn = document.getElementById('proposalNo');

            // Yes button - celebrate!
            yesBtn.onclick = () => {
                gsap.to('#stageProposal', {
                    opacity: 0, visibility: 'hidden', duration: 0.3, onComplete: () => {
                        gsap.to('#proposalResponse', { opacity: 1, visibility: 'visible', duration: 0.5 });
                        gsap.from('.response-icon', { scale: 0, rotation: 360, duration: 0.8, ease: 'back.out(2)' });
                        gsap.from('.response-text', { opacity: 0, y: 20, duration: 0.5, delay: 0.3 });
                        gsap.from('.response-sub', { opacity: 0, duration: 0.4, delay: 0.5 });

                        // After celebration message, continue to reveal card
                        setTimeout(() => {
                            gsap.to('#proposalResponse', {
                                opacity: 0, visibility: 'hidden', duration: 0.5, onComplete: () => {
                                    const tl = gsap.timeline();
                                    addRevealCardAnimation(tl);
                                }
                            });
                        }, 3000);
                    }
                });
            };

            // No button - run away! üòÑ
            noBtn.onmouseover = noBtn.ontouchstart = () => {
                const container = stageProposal.querySelector('.proposal-container');
                const maxX = container.offsetWidth / 2 - noBtn.offsetWidth;
                const maxY = container.offsetHeight / 3;

                const newX = (Math.random() - 0.5) * maxX * 2;
                const newY = (Math.random() - 0.5) * maxY * 2;

                gsap.to(noBtn, {
                    x: newX,
                    y: newY,
                    duration: 0.2,
                    ease: 'power2.out'
                });
            };
        }

        // ============ TEDDY GIFT INTERACTION ============
        function showTeddyStage() {
            const stageTeddy = document.getElementById('stageTeddy');
            stageTeddy.style.display = 'flex';

            gsap.to('#stageTeddy', { opacity: 1, visibility: 'visible', duration: 0.5 });
            gsap.from('.teddy-gift-container', { scale: 0.8, opacity: 0, y: 30, duration: 0.6, ease: 'back.out(1.4)' });

            const giftBox = document.getElementById('giftBox');
            const giftWrapper = document.getElementById('giftWrapper');
            const teddyReveal = document.getElementById('teddyReveal');

            giftBox.onclick = () => {
                giftBox.classList.add('opened');
                giftBox.textContent = 'üéä';

                gsap.to(giftWrapper, {
                    opacity: 0, scale: 0.5, duration: 0.4, onComplete: () => {
                        giftWrapper.style.display = 'none';
                        teddyReveal.classList.add('show');

                        // Create mini celebration
                        for (let i = 0; i < 10; i++) {
                            setTimeout(() => createConfetti(
                                window.innerWidth / 2 + (Math.random() - 0.5) * 200,
                                window.innerHeight / 2
                            ), i * 100);
                        }

                        // Continue to reveal card after a moment
                        setTimeout(() => {
                            gsap.to('#stageTeddy', {
                                opacity: 0, visibility: 'hidden', duration: 0.5, onComplete: () => {
                                    const tl = gsap.timeline();
                                    addRevealCardAnimation(tl);
                                }
                            });
                        }, 3500);
                    }
                });
            };
        }

        // ============ REVEAL CARD ANIMATION (Extracted for reuse) ============
        function addRevealCardAnimation(tl) {
            tl.to('#stage5', { opacity: 1, visibility: 'visible', duration: 0.5 })
                .from('.reveal-card', { scale: 0.8, opacity: 0, y: 50, duration: 1, ease: 'back.out(1.4)' })
                .from('.day-number', { opacity: 0, y: -10, duration: 0.3 }, '-=0.5')
                .from('.day-badge', { opacity: 0, scale: 0.8, duration: 0.4 }, '-=0.3')
                .from('.subtitle', { opacity: 0, duration: 0.4 }, '-=0.2')
                .from('.main-icon', { scale: 0, rotation: -45, stagger: 0.2, duration: 0.5, ease: 'back.out(2)' }, '-=0.2')
                .from('.quote', { opacity: 0, y: 20, duration: 0.6 }, '-=0.2')
                .from('.name', { opacity: 0, letterSpacing: '15px', duration: 0.8 }, '-=0.3')
                .from('.message', { opacity: 0, x: -20, duration: 0.5 }, '-=0.3')
                .from('.footer', { opacity: 0, duration: 0.4 }, '-=0.2')
                // Celebration
                .add(() => createCelebration(), '-=0.5')
                // Hold for reading
                .to({}, { duration: 8 })
                // Fade out card
                .to('#stage5', { opacity: 0, visibility: 'hidden', duration: 0.8 })
                // Show End Screen (Stage 7)
                .add(() => {
                    const stage7 = document.getElementById('stage7');
                    stage7.style.display = 'flex';
                })
                .to('#stage7', { opacity: 1, visibility: 'visible', duration: 0.8 });
        }

        function createCelebration() {
            const container = document.getElementById('celebrationContainer');
            container.innerHTML = '';
            const day = config.days[currentDayIndex];
            const symbols = ['üéà', 'üéâ', '‚ú®', 'üíñ', 'üéä', ...day.petalSymbols.slice(0, 3)];

            for (let i = 0; i < 20; i++) {
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                balloon.textContent = symbols[Math.floor(Math.random() * symbols.length)];
                balloon.style.left = `${Math.random() * 100}%`;
                balloon.style.animationDelay = `${Math.random() * 2}s`;
                balloon.style.animationDuration = `${3 + Math.random() * 3}s`;
                container.appendChild(balloon);
            }
        }


        function showComingSoon() {
            const overlay = document.getElementById('comingSoonOverlay');
            const csName = document.getElementById('csName');
            if (csName) csName.textContent = config.recipientName;

            overlay.classList.add('visible');
            document.getElementById('stagesContainer').style.display = 'none';
            document.getElementById('musicPlayer').style.display = 'none';

            createPetals();
        }

        function hideComingSoon() {
            const overlay = document.getElementById('comingSoonOverlay');
            overlay.classList.remove('visible');
            document.getElementById('stagesContainer').style.display = 'block';
            document.getElementById('musicPlayer').style.display = 'flex';
        }



        function createDayDots() {
            config.days.forEach((day, index) => {
                const dot = document.createElement('div');
                dot.className = 'day-dot';
                dot.title = `${day.date} - ${day.title}`;
                dot.addEventListener('click', () => goToDay(index));
                dayIndicator.appendChild(dot);
            });
        }

        function updateDay(index, animate = true) {
            const day = config.days[index];

            if (animate) {
                mainCard.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    applyDayContent(day, index);
                    mainCard.style.animation = 'slideIn 0.5s ease forwards';
                    resetAnimations();
                    setTimeout(() => updateDebugInfo(), 100);
                }, 300);
            } else {
                applyDayContent(day, index);
            }

            updatePetals(day.petalSymbols);
        }

        function applyDayContent(day, index) {
            // Update CSS variables
            document.documentElement.style.setProperty('--theme-color', day.themeColor);
            document.body.style.background = `linear-gradient(135deg, ${day.bgStart} 0%, ${day.bgMid} 50%, ${day.bgEnd} 100%)`;

            // Update new storytelling content
            document.getElementById('dayNumber').textContent = day.dayNumber || `Day ${index + 1}`;
            document.getElementById('daySubtitle').textContent = day.subtitle || '';
            document.getElementById('dayMessage').textContent = day.message || '';

            // Update content
            dayBadge.textContent = `${day.date} ‚Ä¢ ${day.title}`;
            quoteText.innerHTML = day.quote;
            recipientName.textContent = `‚Äî ${config.recipientName}`;
            footerText.textContent = `Happy ${day.title} ‚Ä¢ ${day.date}, 2026`;

            // Update icons (use multiple if available)
            const icons = day.icons || [day.icon, day.icon, day.icon];
            iconDisplay.innerHTML = `
        <div class="main-icon left">${icons[0]}</div>
        <div class="main-icon center">${icons[1] || icons[0]}</div>
        <div class="main-icon right">${icons[2] || icons[0]}</div>
        `;

            // Update dots
            document.querySelectorAll('.day-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });

            currentDayIndex = index;
        }

        function resetAnimations() {
            document.querySelectorAll('.main-icon').forEach((el, i) => {
                el.style.animation = 'none';
                el.offsetHeight; // Trigger reflow
                el.style.animation = `roseBloom 2s ease forwards ${0.5 + i * 0.3}s`;
            });

            const subtitle = document.getElementById('daySubtitle');
            subtitle.style.animation = 'none';
            subtitle.offsetHeight;
            subtitle.style.animation = 'fadeIn 1.5s ease 0.3s forwards';

            quoteText.style.animation = 'none';
            quoteText.offsetHeight;
            quoteText.style.animation = 'fadeUp 2.5s cubic-bezier(0.19, 1, 0.22, 1) forwards';

            recipientName.style.animation = 'none';
            recipientName.offsetHeight;
            recipientName.style.animation = 'nameGlow 3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards 2.5s';

            const message = document.getElementById('dayMessage');
            message.style.animation = 'none';
            message.offsetHeight;
            message.style.animation = 'fadeUp 1.5s ease 3s forwards';

            footerText.style.animation = 'none';
            footerText.offsetHeight;
            footerText.style.animation = 'fadeIn 2s ease 3.5s forwards';
        }


        // ============ BACKGROUND ANIMATION ============
        function createFloatingBackground() {
            const container = document.getElementById('background-animation');
            const icons = config.floatingIcons || [
                'assets/heart.svg',
                'assets/balloon.svg',
                'assets/happy.svg'
            ];

            // Initial batch
            for (let i = 0; i < 20; i++) {
                spawnFloatingIcon(container, icons);
            }

            // Continuous spawning
            setInterval(() => {
                if (document.visibilityState === 'visible') {
                    spawnFloatingIcon(container, icons);
                }
            }, 2000);
        }

        function spawnFloatingIcon(container, icons) {
            const icon = document.createElement('img');
            icon.src = icons[Math.floor(Math.random() * icons.length)];
            icon.className = 'floating-icon';
            icon.style.left = `${Math.random() * 100}%`;

            // Random size variation
            const size = 30 + Math.random() * 50;
            icon.style.width = `${size}px`;

            // Random Animation Props
            const duration = 15 + Math.random() * 15; // 15-30s float up
            const swayDuration = 4 + Math.random() * 4; // 4-8s sway
            const delay = Math.random() * 5;

            // Set two durations: one for floatUp, one for sway
            icon.style.animationDuration = `${duration}s, ${swayDuration}s`;
            icon.style.animationDelay = `-${delay}s, -${Math.random() * 5}s`;

            container.appendChild(icon);

            // Cleanup
            setTimeout(() => {
                icon.remove();
            }, duration * 1000);
        }

        function setupMusicForDay() {
            const day = config.days[currentDayIndex];
            let source = day.music;

            if (!source && config.musicList && config.musicList.length > 0) {
                source = config.musicList[Math.floor(Math.random() * config.musicList.length)];
            }

            if (source) {
                if (bgMusic.src.indexOf(source) !== -1) return;

                bgMusic.src = source;

                bgMusic.onerror = function () {
                    console.warn("Audio source failed, switching to fallback.");
                    if (bgMusic.src.indexOf('assets/music.mp3') === -1) {
                        bgMusic.src = 'assets/music.mp3';
                        bgMusic.load();
                        bgMusic.play().catch(e => console.log("Fallback play failed", e));
                    }
                };

                bgMusic.load();
                bgMusic.play().catch(e => console.log("Playback deferred", e));
            }
        }

        function tryAutoPlayMusic() {
            bgMusic.play().then(() => {
                isPlaying = true;
                updateMusicIcon();
            }).catch(e => {
                console.log("Autoplay failed, showing modal");
                const modal = document.getElementById('musicConsentModal');
                const btn = document.getElementById('musicConsentBtn');

                modal.classList.add('visible');

                btn.onclick = () => {
                    bgMusic.play();
                    isPlaying = true;
                    updateMusicIcon();
                    modal.classList.remove('visible');
                };
            });
        }

        // ============ NAVIGATION ============
        function goToDay(index) {
            if (index === currentDayIndex) return;
            updateDay(index);
        }

        function navigate(direction) {
            let newIndex = currentDayIndex + direction;
            if (newIndex < 0) newIndex = config.days.length - 1;
            if (newIndex >= config.days.length) newIndex = 0;

            currentDayIndex = newIndex;

            // Kill all running animations
            gsap.globalTimeline.clear();

            // Reset
            populateDayContent(config.days[currentDayIndex]);
            createFloatingBackground(); // re-init bg if needed (optional)
            setupMusicForDay();
            playTimeline();
        }

        // ============ PARALLAX ============
        function setupParallax() {
            document.addEventListener('mousemove', (e) => {
                const xAxis = (window.innerWidth / 2 - e.pageX) / 30;
                const yAxis = (window.innerHeight / 2 - e.pageY) / 30;
                mainCard.style.transform = `
          perspective(1000px)
          rotateY(${xAxis}deg)
          rotateX(${yAxis}deg)
          translateY(-5px)
          scale(1.005)
        `;
            });

            document.addEventListener('mouseleave', () => {
                mainCard.style.transform = 'perspective(1000px) rotateY(0) rotateX(0)';
            });
        }

        // ============ MUSIC ============
        function toggleMusic() {
            if (isPlaying) {
                bgMusic.pause();
                musicPlayer.classList.remove('active');
            } else {
                bgMusic.play().catch(e => console.log("Audio play failed:", e));
                musicPlayer.classList.add('active');
            }
            isPlaying = !isPlaying;
            playPauseBtn.innerHTML = `<i class="fas fa-${isPlaying ? 'pause' : 'play'}"></i>`;
        }

        function updateProgress() {
            const progress = (bgMusic.currentTime / bgMusic.duration) * 100;
            progressBar.style.width = `${progress}%`;
        }

        // ============ EVENT LISTENERS ============
        function setupEventListeners() {
            prevBtn.addEventListener('click', () => navigate(-1));
            nextBtn.addEventListener('click', () => navigate(1));
            playPauseBtn.addEventListener('click', (e) => { e.stopPropagation(); toggleMusic(); });
            bgMusic.addEventListener('timeupdate', updateProgress);

            // Keyboard
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') navigate(-1);
                if (e.key === 'ArrowRight') navigate(1);
                if (e.key === ' ') { e.preventDefault(); toggleMusic(); }
            });

            // Confetti on click
            document.body.addEventListener('click', (e) => {
                for (let i = 0; i < 5; i++) createConfetti(e.clientX, e.clientY);
            });
        }

        function createConfetti(x, y) {
            const day = config.days[currentDayIndex];
            const confetti = document.createElement('div');
            confetti.style.cssText = `
        position: fixed; left: ${x}px; top: ${y}px;
        font-size: 1.5rem; z-index: 9999; pointer-events: none;
        `;
            confetti.innerHTML = day.petalSymbols[Math.floor(Math.random() * day.petalSymbols.length)];
            document.body.appendChild(confetti);

            const animation = confetti.animate([
                { transform: `translate(0, 0) rotate(0deg) scale(1)`, opacity: 1 },
                { transform: `translate(${Math.random() * 100 - 50}px, -150px) rotate(${Math.random() * 360}deg) scale(0)`, opacity: 0 }
            ], { duration: 1500, easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)' });

            animation.onfinish = () => confetti.remove();
        }

        // ============ START ============
        init();
    </script>
</body>

</html>
